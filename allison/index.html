<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MISSION: VALENTINE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pixel: {
                            bg: '#FFF0F5',
                            blue: '#B0E0E6',
                            pink: '#FFB6C1',
                            dark: '#483D8B',
                            green: '#90EE90',
                        }
                    },
                    fontFamily: {
                        'pixel': ['"Press Start 2P"', 'cursive'],
                    },
                    boxShadow: {
                        'pixel': '4px 4px 0px 0px #483D8B',
                        'pixel-pressed': '0px 0px 0px 0px #483D8B',
                    },
                    animation: {
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                        'spin-slow': 'spin 3s linear infinite',
                        'bounce-slow': 'bounce 2s infinite',
                    },
                    keyframes: {
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* BACKGROUND: Pink with 8-Bit Pastel Blue Flowers */
        body {
            background-color: #FFF0F5;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23B0E0E6' fill-opacity='0.6'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .pixel-box {
            position: relative;
            background: white;
            border: 4px solid #483D8B;
            box-shadow: 6px 6px 0px rgba(72, 61, 139, 0.3);
            transition: all 0.2s;
        }

        .pixel-btn {
            border: 2px solid #483D8B;
            transition: all 0.1s;
            cursor: pointer;
        }

        .pixel-btn:active,
        .pixel-btn.selected {
            transform: translate(4px, 4px);
            box-shadow: none !important;
        }

        .selectable:hover {
            transform: translateY(-2px);
        }

        /* Custom Scrollbar */
        textarea::-webkit-scrollbar {
            width: 8px;
        }

        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        textarea::-webkit-scrollbar-thumb {
            background: #483D8B;
        }

        /* Toast Notification */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #483D8B;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 100;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 10px;
            border: 2px solid #fff;
            box-shadow: 4px 4px 0px #000;
        }

        #toast.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from {
                bottom: 0;
                opacity: 0;
            }

            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        @keyframes fadeout {
            from {
                bottom: 30px;
                opacity: 1;
            }

            to {
                bottom: 0;
                opacity: 0;
            }
        }
    </style>
</head>

<body class="text-pixel-dark min-h-screen font-pixel leading-relaxed pb-20 select-none">

    <nav
        class="sticky top-0 z-40 bg-pixel-bg/95 border-b-4 border-pixel-dark px-4 py-4 flex justify-between items-center shadow-sm">
        <div class="text-[12px] text-pixel-dark flex items-center gap-2">
            <span>TOP SECRET</span>
        </div>
        <div class="px-2 py-1 bg-green-200 border-2 border-green-700 text-[12px] text-green-900 animate-pulse">
            CONNECTED
        </div>
    </nav>

    <a href="PASTE_SPOTIFY_LINK_HERE" target="_blank"
        class="fixed top-20 right-4 z-50 pixel-box w-24 h-24 flex flex-col items-center justify-center gap-2 hover:scale-105 transition-transform cursor-pointer bg-slate-800 text-white shadow-xl no-underline">
        <div class="animate-spin-slow">üíø</div>
        <div class="text-[12px] font-mono text-blue-300">ü™àTunesüéª</div>
    </a>

    <main class="max-w-lg mx-auto px-6 pt-8 space-y-10">

        <div class="space-y-4">
            <div class="pixel-box p-5 text-center bg-white/90">
                <div class="text-[12px] leading-loose text-slate-700 font-mono text-left bg-blue-50/50 p-2 rounded">
                    <div class="p-4 text-center">
                        <div
                            class="text-sm justify-center mb-3 text-pixel-dark border-b-2 border-dashed border-pixel-dark pb-2 inline-block">
                            MISSION BRIEFING</div>

                        <div class="flex justify-center gap-4 text-[12px] font-mono text-slate-500">
                            <div>üìÖ DATE: FEB 14</div>
                            <div>‚è∞ START: 14:30</div>
                        </div>
                    </div>
                    <p class="mb-3">
                        <span class="text-slate-900 font-bold">OPERATION:</span><br>
                        VALENTINE PROTOCOL
                    </p>
                    <p>
                        <span class="text-blue-500 font-bold">THE SITUATION:</span><br>
                        Intelligence reports have confirmed that you (Alison Seo) and an unnamed Jungkook look-alike
                        have been experiencing symptoms of <strong>Nickosis</strong> and <strong>Allisonitis</strong>.
                        <br><br>
                        These symptoms change the nature of the quantum space continuum - either slowing down or
                        speeding up
                        time.
                    </p>
                    <br>
                    <p class="mb-3">
                        <span class="text-green-600 font-bold">MISSION:</span><br>
                        Your mission, should you choose to accept it, is to navigate through the treacherous Valentine's
                        Day landscape, extract with the Jungkook look-alike, and spend quality time with him until a
                        cure has been found.
                    </p>
                    <p>
                        <span class="text-red-500 font-bold">WARNING:</span><br>
                        Should you get caught by a performative or love-bombing male... Deny any claims of disliking
                        chicken feet and crocodiles. This message
                        will self-destruct in 5 seconds.
                        <br>
                        <br>
                        <strong>(just kidding, please don't close the tab)</strong>
                    </p>
                </div>
            </div>
        </div>

        <div class="space-y-4">
            <div class="text-xs text-center mb-2 bg-white border-2 border-pixel-dark p-2 inline-block mx-auto">STEP 1:
                SELECT AGENT</div>

            <div id="card-driver" class="pixel-box p-4 selectable cursor-pointer" onclick="rejectDriver()">
                <div class="flex items-start gap-4">
                    <div
                        class="w-12 h-12 bg-blue-100 border-2 border-pixel-dark flex items-center justify-center text-2xl shrink-0">
                        üöó</div>
                    <div class="w-full">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xs text-blue-600">THE DRIVER</h3>
                        </div>
                        <div
                            class="space-y-1 text-[12px] text-slate-600 font-mono border-t border-dashed border-slate-300 pt-2">
                            <div class="flex justify-between"><span>LOVES:</span> <span>SWEET POTATO üç†</span></div>
                            <div class="flex justify-between"><span>FAVORITE NFL TEAM:</span> <span>‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ùì</span>
                            </div>
                            <div class="flex justify-between"><span>HIDDEN TALENT:</span> <span>MIND READING üîÆ</span>
                            </div>
                            <div class="flex justify-between"><span>SKILLS:</span> <span>VOLUME ADJUSTER üîà</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="card-passenger" class="pixel-box p-4 selectable cursor-pointer" onclick="selectPassenger()">
                <div class="flex items-start gap-4">
                    <div
                        class="w-12 h-12 bg-pink-100 border-2 border-pixel-dark flex items-center justify-center text-2xl shrink-0">
                        üê∞</div>
                    <div class="w-full">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xs text-pink-500">THE PASSENGER PRINCESS</h3>
                            <div id="check-passenger" class="hidden text-green-500 text-xs">READY</div>
                        </div>
                        <div
                            class="space-y-1 text-[12px] text-slate-600 font-mono border-t border-dashed border-slate-300 pt-2">
                            <div class="flex justify-between"><span>LOVES:</span> <span>BORI üê∂</span></div>
                            <div class="flex justify-between"><span>FAVORITE NFL TEAM:</span> <span>RAVENS üê¶‚Äç‚¨õ</span>
                            </div>
                            <div class="flex justify-between"><span>HIDDEN TALENT:</span> <span>LUCKY üçÄ</span></div>
                            <div class="flex justify-between"><span>SKILLS:</span> <span>AUX CORD VETO POWER üé∂</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-2" class="space-y-4 opacity-50 pointer-events-none transition-opacity duration-500">
            <div class="text-xs text-center mb-2 bg-white border-2 border-pixel-dark p-2 inline-block mx-auto">STEP 2:
                EXTRACTION</div>

            <div class="grid grid-cols-3 gap-2 md:gap-4">
                <button id="btn-wtc" onclick="selectLocation('WTC')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-blue-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üèôÔ∏è</div>
                    <div class="text-[12px] leading-tight">WTC<br><span class="text-slate-400">Path to car</span></div>
                </button>
                <button id="btn-home" onclick="selectLocation('HOME')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-pink-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üè°</div>
                    <div class="text-[12px] leading-tight">You<br><span class="text-slate-400">Pickup @ Wburg</span>
                    </div>
                </button>
                <button id="btn-other-location" onclick="selectLocation('OTHER-LOCATION')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-yellow-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üé§</div>
                    <div class="text-[12px] leading-tight">Other<br><span class="text-slate-400">Custom
                            Extraction</span></div>
                </button>
            </div>

            <div id="other-input-container" class="hidden transition-all duration-300">
                <textarea id="custom-plan" rows="2"
                    class="w-full pixel-box p-3 text-[12px] font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"
                    placeholder="Type the plan here..."></textarea>
            </div>
        </div>

        <div id="step-3" class="space-y-4 opacity-50 pointer-events-none transition-opacity duration-500">
            <div class="text-xs text-center mb-2 bg-white border-2 border-pixel-dark p-2 inline-block mx-auto">STEP 3:
                RATIONS (for trip)</div>

            <div class="grid grid-cols-2 gap-3">
                <button onclick="toggleSupply(this, 'Sweet')"
                    class="pixel-box p-3 text-center cursor-pointer hover:bg-pink-50 transition-colors">
                    <div class="text-lg mb-1">üç´</div>
                    <div class="text-[12px] font-mono">SWEET<br><span class="text-slate-400">(Choc/Gummy)</span></div>
                </button>
                <button onclick="toggleSupply(this, 'Salty')"
                    class="pixel-box p-3 text-center cursor-pointer hover:bg-yellow-50 transition-colors">
                    <div class="text-lg mb-1">ü•®</div>
                    <div class="text-[12px] font-mono">SALTY<br><span class="text-slate-400">(Chips/Pretz)</span></div>
                </button>
                <button onclick="toggleSupply(this, 'Hydration')"
                    class="pixel-box p-3 text-center cursor-pointer hover:bg-blue-50 transition-colors">
                    <div class="text-lg mb-1">üßã</div>
                    <div class="text-[12px] font-mono">HYDRATION<br><span class="text-slate-400">(Boba/Tea)</span></div>
                </button>
                <button onclick="toggleSupply(this, 'Other')"
                    class="pixel-box p-3 text-center cursor-pointer hover:bg-blue-50 transition-colors">
                    <div class="text-lg mb-1">ü§î</div>
                    <div class="text-[12px] font-mono">OTHER<br><span class="text-slate-400">(What else?)</span></div>
                </button>
            </div>

            <div id="ration-input-container" class="hidden transition-all duration-300">
                <textarea id="ration-details" rows="2"
                    class="w-full pixel-box p-3 text-[12px] font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"
                    placeholder="Specific cravings? (e.g. Turtle Chips, Corn chips)"></textarea>
            </div>
        </div>

        <div id="step-4" class="space-y-4 opacity-50 pointer-events-none transition-opacity duration-500">
            <div class="text-xs text-center mb-2 bg-white border-2 border-pixel-dark p-2 inline-block mx-auto">STEP 4:
                DINNER PLANNING</div>

            <div class="grid grid-cols-2 gap-2 md:gap-4">
                <button id="btn-japanese" onclick="selectCuisine('JAPANESE')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-blue-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üáØüáµ</div>
                    <div class="text-[12px] leading-tight">Japanese<br><span class="text-slate-400">Salmon, Sushi,
                            Mochi, Udon</span></div>
                </button>
                <button id="btn-korean" onclick="selectCuisine('KOREAN')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-pink-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üá∞üá∑</div>
                    <div class="text-[12px] leading-tight">Korean<br><span class="text-slate-400">Could use your
                            expertise</span></div>
                </button>
                <button id="btn-italian" onclick="selectCuisine('ITALIAN')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-yellow-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üáÆüáπ</div>
                    <div class="text-[12px] leading-tight">Italian<br><span class="text-slate-400">Carbonara, pasta,
                            bruschetta</span></div>
                </button>
                <button id="btn-other" onclick="selectCuisine('OTHER')"
                    class="pixel-box p-2 md:p-4 text-center hover:bg-yellow-50 cursor-pointer flex flex-col items-center justify-center h-full">
                    <div class="text-xl mb-2">üé≤</div>
                    <div class="text-[12px] leading-tight">Other<br><span class="text-slate-400">Name it. Let's make
                            it</span></div>
                </button>
            </div>

            <div id="cuisine-input-container" class="hidden transition-all duration-300">
                <textarea id="cuisine-details" rows="2"
                    class="w-full pixel-box p-3 text-[12px] font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"
                    placeholder="What are you craving?"></textarea>
            </div>
        </div>

        <div id="step-5" class="space-y-4 opacity-50 pointer-events-none transition-opacity duration-500">
            <div class="text-xs text-center mb-2 bg-white border-2 border-pixel-dark p-2 inline-block mx-auto">STEP 5:
                OPEN COMMS</div>
            <textarea id="final-comments" rows="3"
                class="w-full pixel-box p-3 text-[10px] font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"
                placeholder="Lego ideas? Special requests? Compliments for the developer?"></textarea>
        </div>

        <div id="step-final" class="space-y-6 opacity-50 pointer-events-none transition-opacity duration-500">
            <div class="text-xs text-center mb-2">--- SIDE QUESTS ---</div>

            <div class="pixel-box p-3 flex items-center gap-3">
                <div class="text-lg">üíê</div>
                <div class="flex-1">
                    <div class="flex justify-between text-[8px] mb-1">
                        <span>LEGOS</span>
                        <span>0% (UNBUILT)</span>
                    </div>
                    <div class="h-2 bg-slate-200 border border-pixel-dark">
                        <div class="h-full w-[0%] bg-yellow-400"></div>
                    </div>
                </div>
            </div>
            <div class="pixel-box p-3 flex items-center gap-3">
                <div class="text-lg">üçø</div>
                <div class="flex-1">
                    <div class="flex justify-between text-[12px] mb-1">
                        <span>MOVIES</span>
                        <span>0% (NOT STARTED)</span>
                    </div>
                    <div class="h-2 bg-slate-200 border border-pixel-dark">
                        <div class="h-full w-[0%] bg-yellow-400"></div>
                    </div>
                </div>
            </div>
            <div class="pixel-box p-3 flex items-center gap-3">
                <div class="text-lg">üëæ</div>
                <div class="flex-1">
                    <div class="flex justify-between text-[12px] mb-1">
                        <span>GAMES</span>
                        <span>0% (NOT PLAYED)</span>
                    </div>
                    <div class="h-2 bg-slate-200 border border-pixel-dark">
                        <div class="h-full w-[0%] bg-yellow-400"></div>
                    </div>
                </div>
            </div>
            <div class="pixel-box p-3 flex items-center gap-3">
                <div class="text-lg">üç∞</div>
                <div class="flex-1">
                    <div class="flex justify-between text-[12px] mb-1">
                        <span>LAVA CAKE</span>
                        <span>0% (NO MINUTES BAKED)</span>
                    </div>
                    <div class="h-2 bg-slate-200 border border-pixel-dark">
                        <div class="h-full w-[0%] bg-yellow-400"></div>
                    </div>
                </div>
            </div>

            <div class="pixel-box p-4 bg-blue-50 text-center">
                <div id="final-msg" class="text-[12px] mb-4 leading-loose font-mono">
                    STATUS: PENDING INPUT...
                </div>
                <button onclick="submitMission()"
                    class="w-full py-3 bg-pixel-dark text-white text-[12px] pixel-btn shadow-pixel active:shadow-none hover:bg-slate-700 transition-all">
                    PRESS START
                </button>
            </div>
        </div>

    </main>

    <div id="toast">Error</div>

    <script>
        // PASTE YOUR WEB3FORMS KEY HERE
        const ACCESS_KEY = "4e849226-4927-44f1-9dce-76f849de201e";

        let characterSelected = false;
        let selectedLoc = "";
        let selectedCuisine = "";
        let selectedSupplies = new Set();

        function rejectDriver() {
            const card = document.getElementById('card-driver');
            const toast = document.getElementById("toast");
            card.classList.add('animate-shake');
            setTimeout(() => card.classList.remove('animate-shake'), 500);
            showToast("Uhhh, that's not supposed to be you");
        }

        function selectPassenger() {
            if (characterSelected) return;
            const card = document.getElementById('card-passenger');
            const check = document.getElementById('check-passenger');

            card.style.borderColor = '#FFB6C1';
            card.style.backgroundColor = '#FFF0F5';
            check.classList.remove('hidden');
            document.getElementById('card-driver').classList.add('opacity-50');

            // Reveal Step 2
            document.getElementById('step-2').classList.remove('opacity-50', 'pointer-events-none');
            characterSelected = true;
        }

        function selectLocation(loc) {
            if (!characterSelected) return;
            selectedLoc = loc;

            const btns = {
                'WTC': document.getElementById('btn-wtc'),
                'HOME': document.getElementById('btn-home'),
                'OTHER-LOCATION': document.getElementById('btn-other-location')
            };
            const otherInput = document.getElementById('other-input-container');
            const customInput = document.getElementById('custom-plan');

            Object.values(btns).forEach(btn => {
                btn.style.backgroundColor = 'white';
                btn.style.borderColor = '#483D8B';
            });
            otherInput.classList.add('hidden');

            if (loc === 'WTC') {
                btns['WTC'].style.backgroundColor = '#B0E0E6';
                btns['WTC'].style.borderColor = '#000';
            } else if (loc === 'HOME') {
                btns['HOME'].style.backgroundColor = '#FFB6C1';
                btns['HOME'].style.borderColor = '#000';
                otherInput.classList.remove('hidden');
                customInput.placeholder = "üìç Enter Williamsburg Address...";
            } else if (loc === 'OTHER-LOCATION') {
                btns['OTHER-LOCATION'].style.backgroundColor = '#FFFACD';
                btns['OTHER-LOCATION'].style.borderColor = '#000';
                otherInput.classList.remove('hidden');
                customInput.placeholder = "üìù Type the plan here...";
            }

            // Reveal Step 3 (Rations)
            document.getElementById('step-3').classList.remove('opacity-50', 'pointer-events-none');
        }

        function toggleSupply(btn, type) {
            if (selectedSupplies.has(type)) {
                selectedSupplies.delete(type);
                btn.style.backgroundColor = 'white';
                btn.style.borderColor = '#483D8B';
            } else {
                selectedSupplies.add(type);
                btn.style.backgroundColor = '#90EE90'; // Green
                btn.style.borderColor = '#000';
            }

            // Show/Hide Ration Detail Input based on selection
            const rationInput = document.getElementById('ration-input-container');
            if (selectedSupplies.size > 0) {
                rationInput.classList.remove('hidden');
                // UNLOCK STEP 4 (DINNER)
                document.getElementById('step-4').classList.remove('opacity-50', 'pointer-events-none');
            } else {
                rationInput.classList.add('hidden');
            }
        }

        function selectCuisine(type) {
            selectedCuisine = type;
            const btns = {
                'JAPANESE': document.getElementById('btn-japanese'),
                'KOREAN': document.getElementById('btn-korean'),
                'ITALIAN': document.getElementById('btn-italian'),
                'OTHER': document.getElementById('btn-other')
            };
            const cuisineInput = document.getElementById('cuisine-input-container');

            Object.values(btns).forEach(btn => {
                btn.style.backgroundColor = 'white';
                btn.style.borderColor = '#483D8B';
            });
            cuisineInput.classList.add('hidden');

            if (type === 'JAPANESE') {
                btns['JAPANESE'].style.backgroundColor = '#B0E0E6';
                btns['JAPANESE'].style.borderColor = '#000';
            } else if (type === 'KOREAN') {
                btns['KOREAN'].style.backgroundColor = '#FFB6C1';
                btns['KOREAN'].style.borderColor = '#000';
            } else if (type === 'ITALIAN') {
                btns['ITALIAN'].style.backgroundColor = '#FFFACD';
                btns['ITALIAN'].style.borderColor = '#000';
            } else {
                btns['OTHER'].style.backgroundColor = '#FFFACD';
                btns['OTHER'].style.borderColor = '#000';
                cuisineInput.classList.remove('hidden');
            }

            // Reveal STEP 5 and FINAL
            document.getElementById('step-5').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('step-final').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('final-msg').innerText = "SYSTEMS GO. READY TO LAUNCH.";
        }

        function submitMission() {
            if (!selectedLoc || !selectedCuisine) return;

            const btn = document.querySelector('button[onclick="submitMission()"]');
            const originalText = btn.innerText;
            btn.innerText = "SENDING...";
            btn.classList.add('opacity-75', 'cursor-wait');

            const locDetails = document.getElementById('custom-plan').value;
            const cuisineDetails = document.getElementById('cuisine-details').value;
            const rationDetails = document.getElementById('ration-details').value;
            const finalComments = document.getElementById('final-comments').value;
            const supplies = Array.from(selectedSupplies).join(", ");

            const formData = {
                access_key: ACCESS_KEY,
                subject: "‚ù§Ô∏è Valentine Quest Update",
                from_name: "Passenger Princess",
                message: `Player 2 Choice Log:\n\nüìç Location: ${selectedLoc}\nüìù Address/Note: ${locDetails || "N/A"}\n\nüõçÔ∏è Supply Categories: ${supplies || "None"}\nüçø Specific Snacks: ${rationDetails || "None"}\n\nüçΩÔ∏è Dinner Mode: ${selectedCuisine}\nüç¥ Specific Craving: ${cuisineDetails || "N/A"}\n\nüíå Final Remarks: ${finalComments || "None"}`
            };

            const json = JSON.stringify(formData);

            fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: json
            })
                .then(async (response) => {
                    if (response.status == 200) {
                        triggerConfetti();
                        btn.innerText = "MISSION ACCEPTED";
                        btn.classList.remove('bg-pixel-dark', 'opacity-75', 'cursor-wait');
                        btn.classList.add('bg-green-500', 'border-green-700');
                        showToast("‚úÖ LOG SENT TO DRIVER");
                    } else {
                        console.log(response);
                        showToast("‚ùå ERROR. Check Console.");
                        btn.innerText = originalText;
                    }
                })
                .catch(error => {
                    console.log(error);
                    showToast("‚ùå ERROR. Network Issue.");
                    btn.innerText = originalText;
                });
        }

        function triggerConfetti() {
            var count = 200;
            var defaults = { origin: { y: 0.7 }, shapes: ['square'], colors: ['#B0E0E6', '#FFB6C1', '#FFF68F'] };
            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, { particleCount: Math.floor(count * particleRatio) }));
            }
            fire(0.25, { spread: 26, startVelocity: 55 });
            fire(0.2, { spread: 60 });
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.className = "show";
            setTimeout(() => { t.className = t.className.replace("show", ""); }, 3000);
        }
    </script>
</body>

</html>